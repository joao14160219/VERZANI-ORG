<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Organograma Interativo</title>
  <script src="https://balkan.app/js/orgchart.js"></script>
  <link rel="stylesheet" href="style.css">
</head>
<body>
<img src="logo-verzani.png">
<div id="entradaContainer">
  <label for="entrada"><strong>INSIRA OS DADOS NO FORMATO:</strong> <br><small><code>NOME - CARGO - CLASSIFICAÇÃO ; CHEFE</code></small></label>
  <textarea id="entrada" placeholder="Exemplo:  
ANTONIO CAVALCANTI JUNIOR-CFO-02. VP ;FABIO SANDRINI BAPTISTA
FABIO PANHONI DE PAULA PEREIRA-DIRETOR M&A-03. Diretor ;ANTONIO CAVALCANTI JUNIOR"></textarea>
  <button onclick="gerarOrganograma()">GERAR ORGANOGRAMA</button>
</div>

<div id="organograma"></div>

<script>
  function gerarOrganograma() {
    const texto = document.getElementById("entrada").value;
    const linhas = texto.trim().split("\n");
    const nodes = [];

    linhas.forEach(linha => {
      if (linha.trim() === "") return;

      const partes = linha.trim().split(";");
      const dados = partes[0].trim().split("-");
      const nome = dados[0]?.trim();
      const cargo = dados[1]?.trim() || "";
      const classificacao = dados[2]?.trim() || "";
      const chefe = partes[1]?.trim();

      if (!nome) return;

      const node = {
        id: nome,
        name: nome,
        title: `${cargo} - ${classificacao}`
      };

      if (chefe && chefe !== nome) {
        node.pid = chefe;
      }

      nodes.push(node);
    });

    document.getElementById("organograma").innerHTML = "";

    new OrgChart(document.getElementById("organograma"), {
      nodes,
      template: "isla",
      nodeBinding: {
        field_0: "name",
        field_1: "title"
      }
    });
  }
</script>
</body>
</html>
